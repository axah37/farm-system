<div class="wrapper">
	<h1>{{ field.title | titlecase }}</h1>

	<div class="main-content">
		<form #taskForm="ngForm" (ngSubmit)="onSubmit(taskForm)" novalidate>
			<div class="task-input">
				<div class="form-group name">
					<mat-form-field appearance="fill" class="name">
						<mat-label>Task</mat-label>
						<input
							class="form-control"
							matInput
							name="taskName"
							[(ngModel)]="model.taskName"
							required
						/>
					</mat-form-field>
				</div>
				<div class="form-group">
					<mat-form-field appearance="fill">
						<mat-label>Due Date</mat-label>
						<input
							class="form-control"
							matInput
							[matDatepicker]="picker"
							name="dueDate"
							[(ngModel)]="model.dueDate"
							required
						/>
						<mat-datepicker-toggle
							matSuffix
							[for]="picker"
						></mat-datepicker-toggle>
						<mat-datepicker #picker></mat-datepicker>
					</mat-form-field>
				</div>

				<div class="form-group description">
					<mat-form-field appearance="fill" class="description">
						<mat-label>Description</mat-label>
						<textarea
							class="form-control"
							matInput
							name="description"
							[(ngModel)]="model.description"
							required
						></textarea>
					</mat-form-field>
				</div>

				<button
					class="submit"
					type="submit"
					mat-raised-button
					[disabled]="taskForm.invalid"
				>
					Add Task
				</button>
			</div>
		</form>
		<div>
			<table
				mat-table
				[dataSource]="dataSource"
				class="mat-elevation-z8 task-table"
			>
				<ng-container matColumnDef="name">
					<th mat-header-cell *matHeaderCellDef>Task Name</th>
					<td
						mat-cell
						*matCellDef="let element"
						[ngClass]="{
							done: element.completed,
							overdue: now > element.dueDate
						}"
					>
						{{ element.taskName }}
					</td>
				</ng-container>

				<ng-container matColumnDef="description">
					<th mat-header-cell *matHeaderCellDef>Description</th>
					<td
						mat-cell
						*matCellDef="let element"
						[ngClass]="{
							done: element.completed,
							overdue: now > element.dueDate
						}"
					>
						{{ element.description }}
						<!-- {{
				element.description.length > 6
					? (element.description | slice: 0:6) + "..."
					: element.description
			}} -->
					</td>
				</ng-container>

				<ng-container matColumnDef="completed">
					<th mat-header-cell *matHeaderCellDef>Completed</th>
					<td
						mat-cell
						*matCellDef="let element"
						[ngClass]="{
							done: element.completed,
							overdue: now > element.dueDate
						}"
					>
						<input
							type="checkbox"
							[checked]="element.completed"
							(change)="updateComplete(element)"
						/>
					</td>
				</ng-container>

				<ng-container matColumnDef="delete">
					<th mat-header-cell *matHeaderCellDef class="delete-column"></th>
					<td
						mat-cell
						*matCellDef="let element"
						[ngClass]="{
							done: element.completed,
							overdue: now > element.dueDate
						}"
					>
						<button mat-raised-button (click)="deleteTask(element.id)">
							Delete
						</button>
					</td>
				</ng-container>

				<ng-container matColumnDef="date">
					<th mat-header-cell *matHeaderCellDef>Due Date</th>
					<td
						mat-cell
						*matCellDef="let element"
						[ngClass]="{
							done: element.completed,
							overdue: now > element.dueDate
						}"
					>
						{{ element.dueDate | date: "shortDate" }}
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
			</table>
			<mat-paginator
				[pageSizeOptions]="[5, 10, 20]"
				showFirstLastButtons
				aria-label="Select page of periodic elements"
			>
			</mat-paginator>
		</div>
	</div>
</div>
